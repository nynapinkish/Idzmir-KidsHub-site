<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Clinical - IDZMR Kids Hub (Admin)</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
<style>
* { margin:0; padding:0; box-sizing:border-box; }
body {
    font-family: 'Poppins', sans-serif;
    background: linear-gradient(135deg, #f8f9fa 0%, #e8f0f5 100%);
    min-height:100vh;
    color:#333;
    line-height:1.4;
    font-size:12px;
    padding:1rem;
}

/* Tabs */
.tab-navigation {
    display:flex;
    gap:0;
    margin-bottom:1.5rem;
    border-radius:12px;
    overflow:hidden;
    box-shadow:0 4px 15px rgba(33,83,124,0.1);
}
.tab-item {
    flex:1;
    text-align:center;
    padding:0.85rem 1rem;
    cursor:pointer;
    color:#666;
    background:#f8f9fa;
    font-weight:500;
    font-size:0.8rem;
    transition:0.3s;
    border-bottom:3px solid transparent;
}
.tab-item:hover { background:#e8f0f5; color:#21537c; }
.tab-item.active { 
    background:white; 
    color:#21537c; 
    font-weight:600; 
    border-bottom:3px solid #fed236;
}

/* Sections */
.section { display:none; }
.section.active { display:block; }
.dashboard-section h2 { 
    font-size:1.4rem;
    font-weight:600;
    color:#21537c;
    margin-bottom:0.75rem;
    display:flex;
    align-items:center;
    gap:0.5rem;
}

/* Form Cards */
.cards-container {
    display:grid;
    grid-template-columns:repeat(auto-fit,minmax(280px,1fr));
    gap:20px;
    margin-bottom:1.5rem;
}
.form-card {
    background:white;
    border-radius:12px;
    padding:25px 20px;
    text-align:center;
    cursor:pointer;
    position:relative;
    box-shadow:0 4px 15px rgba(33,83,124,0.08);
    transition:0.3s;
    border-top:3px solid #fed236;
}
.form-card:hover { transform:translateY(-5px); box-shadow:0 8px 25px rgba(33,83,124,0.15); }
.form-card h3 {
    color:#21537c;
    font-size:16px;
    font-weight:600;
    line-height:1.4;
}
.form-card .btn-export {
    position: absolute;
    top:10px;
    right:10px;
    background:#fed236;
    border:none;
    border-radius:6px;
    padding:6px;
    cursor:pointer;
    display:flex;
    align-items:center;
    justify-content:center;
    transition:0.2s;
}
.form-card .btn-export:hover { transform:translateY(-2px); box-shadow:0 2px 8px rgba(0,0,0,0.15); }
.form-card .btn-export svg { width:16px; height:16px; fill:#000000; }

/* Tables */
.table-container {
    background:white;
    padding:1rem;
    border-radius:12px;
    box-shadow:0 4px 20px rgba(33,83,124,0.1);
    border:1px solid rgba(33,83,124,0.05);
    margin-top:1.5rem;
}
.vu-table {
    width:100%;
    border-collapse:collapse;
    font-size:0.75rem;
}
.vu-table th, .vu-table td { padding:0.6rem 0.5rem; text-align:left; }
.vu-table thead { background:#21537c; color:white; }
.vu-table th:first-child { border-radius:8px 0 0 8px; }
.vu-table th:last-child { border-radius:0 8px 8px 0; }
.vu-table tbody tr { border-bottom:1px solid #f0f2f5; transition:0.2s; }
.vu-table tbody tr:hover { background:linear-gradient(90deg, rgba(33,83,124,0.03) 0%, rgba(254,210,54,0.05) 100%); }

/* Checkboxes & Buttons */
.checkbox-group { display:flex; flex-direction:column; gap:6px; }
.checkbox-group label { display:flex; align-items:center; gap:6px; cursor:pointer; padding:4px 8px; border-radius:4px; transition:0.2s; font-size:0.75rem; }
.checkbox-group label:hover { background:#f0f8ff; }
.action-buttons { display:flex; gap:6px; flex-wrap:wrap; }
.assign-btn { background:#ef5350; color:white; padding:7px 14px; border:none; border-radius:6px; font-weight:500; cursor:pointer; font-size:0.7rem; transition:0.2s; }
.assign-btn:hover { transform:translateY(-2px); box-shadow:0 3px 8px rgba(198,40,40,0.3); }
.save-changes-btn { background:#4caf50; color:white; padding:7px 14px; border:none; border-radius:6px; font-weight:500; cursor:pointer; font-size:0.7rem; transition:0.2s; }
.save-changes-btn:hover { transform:translateY(-2px); box-shadow:0 3px 8px rgba(46,125,50,0.3); }
.save-all-btn { background:#21537c; color:white; padding:0.6rem 1.5rem; border:none; border-radius:8px; font-weight:500; cursor:pointer; transition:0.2s; font-size:0.8rem; }
.save-all-btn:hover { transform:translateY(-2px); box-shadow:0 4px 12px rgba(33,83,124,0.3); }
.table-footer { margin-top:1rem; }

/* Modal */
#form-modal {
    display: none;
    position: fixed;
    top: 0; left: 0;
    width: 100%; height: 100%;
    backdrop-filter: blur(5px);
    background: rgba(0,0,0,0.1);
    justify-content: center;
    align-items: center;
    z-index: 1000;
}
#form-modal .modal-content {
    position: relative;
    width: 90%;
    max-width: 900px;
    height: 80%;
    background: transparent;
    overflow: hidden;
    display: flex;
    justify-content: center;
    align-items: center;
}
#form-modal iframe {
    width: 100%;
    height: 100%;
    border: none;
    background: transparent;
}
#form-modal .close-btn {
    position: absolute;
    top: 10px; right: 10px;
    background: #004aad;
    color: white;
    border: none;
    border-radius: 50%;
    width: 30px; height: 30px;
    font-weight: bold;
    font-size: 1.2rem;
    cursor: pointer;
    z-index: 1010;
    display: flex;
    align-items: center;
    justify-content: center;
}

@media (max-width:768px){
    .tab-navigation { flex-direction:column; }
    .cards-container { grid-template-columns:1fr; }
}
</style>
</head>
<body>

<!-- Tabs -->
<div class="tab-navigation">
    <div class="tab-item active" id="tab-assistant" onclick="showSection('assistant-therapist')">Assistant Therapist</div>
    <div class="tab-item" id="tab-occupational" onclick="showSection('occupational-therapy')">Occupational Therapy</div>
    <div class="tab-item" id="tab-rts" onclick="showSection('ready-to-school')">Ready To School</div>
    <div class="tab-item" id="tab-physical" onclick="showSection('physical-therapy')">Physical Therapy</div>
</div>

<!-- Assistant Therapist Section -->
<section id="assistant-therapist-section" class="dashboard-section section active">
<h2>ASSISTANT THERAPIST</h2>
<div class="form-cards-wrapper">
<div class="cards-container">
<div class="form-card" onclick="viewForm('AT-Form01')">
    <h3>Session Progress Report</h3>
    <button class="btn-export" onclick="exportForm(event,'AT-Form01')">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M5 20h14v-2H5v2zm7-18l-5 5h3v4h4v-4h3l-5-5z"/></svg>
    </button>
</div>
<div class="form-card" onclick="viewForm('AT-Form02')">
    <h3>Client Attendance Form</h3>
    <button class="btn-export" onclick="exportForm(event,'AT-Form02')">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M5 20h14v-2H5v2zm7-18l-5 5h3v4h4v-4h3l-5-5z"/></svg>
    </button>
</div>
</div></div>
<div class="table-container">
<h2>STAFF FORM ALLOCATION</h2>
<table class="vu-table"><thead><tr>
<th>Full Name</th><th>User ID</th><th>Email</th><th>Assign Form</th><th>Action</th>
</tr></thead>
<tbody id="staff-table-body-assistant"></tbody>
</table>
<div class="table-footer"><button class="save-all-btn" onclick="saveAll('Assistant Therapist')">Save All Changes</button></div>
</div>
</section>

<!-- Occupational Therapy Section -->
<section id="occupational-therapy-section" class="dashboard-section section">
<h2>OCCUPATIONAL THERAPY</h2>
<div class="form-cards-wrapper">
<div class="cards-container">
<div class="form-card" onclick="viewForm('OT-Form01')">
    <h3>OT Assessment Form</h3>
    <button class="btn-export" onclick="exportForm(event,'OT-Form01')">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M5 20h14v-2H5v2zm7-18l-5 5h3v4h4v-4h3l-5-5z"/></svg>
    </button>
</div>
<div class="form-card" onclick="viewForm('OT-Form02')">
    <h3>OT Session Notes</h3>
    <button class="btn-export" onclick="exportForm(event,'OT-Form02')">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M5 20h14v-2H5v2zm7-18l-5 5h3v4h4v-4h3l-5-5z"/></svg>
    </button>
</div>
</div></div>
<div class="table-container">
<h2>STAFF FORM ALLOCATION</h2>
<table class="vu-table"><thead><tr>
<th>Full Name</th><th>User ID</th><th>Email</th><th>Assign Form</th><th>Action</th>
</tr></thead><tbody id="staff-table-body-occupational"></tbody></table>
<div class="table-footer"><button class="save-all-btn" onclick="saveAll('Occupational Therapy')">Save All Changes</button></div>
</div>
</section>

<!-- Ready To School Section -->
<section id="ready-to-school-section" class="dashboard-section section">
<h2>READY TO SCHOOL</h2>
<div class="form-cards-wrapper">
<div class="cards-container">
<div class="form-card" onclick="viewForm('RTS-Form01')">
    <h3>School Readiness Assessment</h3>
    <button class="btn-export" onclick="exportForm(event,'RTS-Form01')">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M5 20h14v-2H5v2zm7-18l-5 5h3v4h4v-4h3l-5-5z"/></svg>
    </button>
</div>
<div class="form-card" onclick="viewForm('RTS-Form02')">
    <h3>RTS Progress Report</h3>
    <button class="btn-export" onclick="exportForm(event,'RTS-Form02')">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M5 20h14v-2H5v2zm7-18l-5 5h3v4h4v-4h3l-5-5z"/></svg>
    </button>
</div>
</div></div>
<div class="table-container">
<h2>STAFF FORM ALLOCATION</h2>
<table class="vu-table"><thead><tr>
<th>Full Name</th><th>User ID</th><th>Email</th><th>Assign Form</th><th>Action</th>
</tr></thead><tbody id="staff-table-body-rts"></tbody></table>
<div class="table-footer"><button class="save-all-btn" onclick="saveAll('Ready To School')">Save All Changes</button></div>
</div>
</section>

<!-- Physical Therapy Section -->
<section id="physical-therapy-section" class="dashboard-section section">
<h2>PHYSICAL THERAPY</h2>
<div class="form-cards-wrapper">
<div class="cards-container">
<div class="form-card" onclick="viewForm('PT-Form01')">
    <h3>PT Assessment Form</h3>
    <button class="btn-export" onclick="exportForm(event,'PT-Form01')">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M5 20h14v-2H5v2zm7-18l-5 5h3v4h4v-4h3l-5-5z"/></svg>
    </button>
</div>
<div class="form-card" onclick="viewForm('PT-Form02')">
    <h3>PT Session Notes</h3>
    <button class="btn-export" onclick="exportForm(event,'PT-Form02')">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M5 20h14v-2H5v2zm7-18l-5 5h3v4h4v-4h3l-5-5z"/></svg>
    </button>
</div>
</div></div>
<div class="table-container">
<h2>STAFF FORM ALLOCATION</h2>
<table class="vu-table"><thead><tr>
<th>Full Name</th><th>User ID</th><th>Email</th><th>Assign Form</th><th>Action</th>
</tr></thead><tbody id="staff-table-body-physical"></tbody></table>
<div class="table-footer"><button class="save-all-btn" onclick="saveAll('Physical Therapy')">Save All Changes</button></div>
</div>
</section>

<!-- Form Modal -->
<div id="form-modal">
  <div class="modal-content">
    <button class="close-btn" onclick="closeFormModal()">Ã—</button>
    <iframe id="form-iframe" src="" allowtransparency="true"></iframe>
  </div>
</div>

<script>
// Section navigation
function showSection(sectionName){
    document.querySelectorAll('.section').forEach(s=>s.classList.remove('active'));
    document.querySelectorAll('.tab-item').forEach(t=>t.classList.remove('active'));
    document.getElementById(sectionName+'-section').classList.add('active');
    if(sectionName==='assistant-therapist') document.getElementById('tab-assistant').classList.add('active');
    else if(sectionName==='occupational-therapy') document.getElementById('tab-occupational').classList.add('active');
    else if(sectionName==='ready-to-school') document.getElementById('tab-rts').classList.add('active');
    else if(sectionName==='physical-therapy') document.getElementById('tab-physical').classList.add('active');
}

// Form Path Mapping
const formPaths = {
    'AT-Form01': 'Forms/formAT01.html',
    'AT-Form02': 'Forms/formAT02.html',
    'OT-Form01': 'Forms/formOT01.html',
    'OT-Form02': 'Forms/formOT02.html',
    'RTS-Form01': 'Forms/formRTS01.html',
    'RTS-Form02': 'Forms/formRTS02.html',
    'PT-Form01': 'Forms/formPT01.html',
    'PT-Form02': 'Forms/formPT02.html'
};

// Staff list
const staffList=[
  {fullName:"Ali Bin Ahmad",userID:"U001",email:"ali@example.com"},
  {fullName:"Siti Binti Jamal",userID:"U002",email:"siti@example.com"},
  {fullName:"Ahmad Bin Abdullah",userID:"U003",email:"ahmad@example.com"}
];

// Form lists
const formListAssistant = ["Session Progress Report (AT)", "Client Attendance Form (AT)"];
const formListOccupational = ["OT Assessment Form", "OT Session Notes"];
const formListRTS = ["School Readiness Assessment", "RTS Progress Report"];
const formListPhysical = ["PT Assessment Form", "PT Session Notes"];

let assignments={};

// Generate table rows
function generateTableRows(tbodyId, formList){
    const tbody=document.getElementById(tbodyId);
    tbody.innerHTML='';
    staffList.forEach(staff=>{
        const tr=document.createElement("tr");
        ["fullName","userID","email"].forEach(key=>{
            const td=document.createElement("td");
            td.textContent=staff[key]; tr.appendChild(td);
        });
        const tdForm=document.createElement("td");
        const checkboxGroup=document.createElement("div"); checkboxGroup.className="checkbox-group";
        formList.forEach(form=>{
            const label=document.createElement("label");
            const checkbox=document.createElement("input"); checkbox.type="checkbox"; checkbox.value=form;
            checkbox.checked=assignments[staff.userID]?.includes(form)||false;
            label.appendChild(checkbox); label.appendChild(document.createTextNode(form));
            checkboxGroup.appendChild(label);
        });
        tdForm.appendChild(checkboxGroup); tr.appendChild(tdForm);

        const tdAction=document.createElement("td"); const actionDiv=document.createElement("div"); actionDiv.className="action-buttons";
        const assignBtn=document.createElement("button"); assignBtn.className="assign-btn"; assignBtn.textContent="Assign Form";
        assignBtn.onclick=()=>{ 
            const selectedForms=Array.from(checkboxGroup.querySelectorAll("input[type=checkbox]")).filter(cb=>cb.checked).map(cb=>cb.value);
            assignments[staff.userID]=selectedForms; 
            alert(`Assigned forms for ${staff.fullName}: ${selectedForms.join(", ")}`);
        };
        actionDiv.appendChild(assignBtn);

        const saveBtn=document.createElement("button"); saveBtn.className="save-changes-btn"; saveBtn.textContent="Save Changes";
        saveBtn.onclick=()=>{ 
            const selectedForms=Array.from(checkboxGroup.querySelectorAll("input[type=checkbox]")).filter(cb=>cb.checked).map(cb=>cb.value);
            assignments[staff.userID]=selectedForms; 
            alert(`Changes saved for ${staff.fullName}`);
        };
        actionDiv.appendChild(saveBtn);

        tdAction.appendChild(actionDiv); tr.appendChild(tdAction);
        tbody.appendChild(tr);
    });
}

generateTableRows("staff-table-body-assistant", formListAssistant);
generateTableRows("staff-table-body-occupational", formListOccupational);
generateTableRows("staff-table-body-rts", formListRTS);
generateTableRows("staff-table-body-physical", formListPhysical);

// Export to PDF
function exportForm(e, formKey) {
    e.stopPropagation();
    const formPath = formPaths[formKey];
    if (!formPath) { alert('Form not found'); return; }
    const printWindow = window.open(formPath, '_blank', 'width=800,height=600');
    if (printWindow) {
        printWindow.onload = function() { setTimeout(function() { printWindow.print(); }, 500); };
    } else { alert('Please allow pop-ups to export the form'); }
}

// Modal
function viewForm(formKey) {
    const modal = document.getElementById('form-modal');
    const iframe = document.getElementById('form-iframe');
    const formPath = formPaths[formKey];
    if (!formPath) { alert('Form not found'); return; }
    iframe.src = formPath;
    modal.style.display = 'flex';
}

function closeFormModal() {
    document.getElementById('form-modal').style.display = 'none';
    document.getElementById('form-iframe').src = '';
}

document.getElementById('form-modal').addEventListener('click', function(e){ if(e.target === this) closeFormModal(); });
document.addEventListener('keydown', function(e){ if(e.key === "Escape") closeFormModal(); });

// Save All
function saveAll(section){ alert('All changes saved for ' + section); }
</script>
</body>
</html>