<!DOCTYPE html>
<html lang="ms">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Jom Pilih! - Idzmir Kids Hub</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="../../../css/SpatialConcepts/inside-outside/game_page9.css">
  <link rel="stylesheet" href="../../../css/homepage/header.css">
</head>
<body>
  <!-- Header -->
  <div id="header-placeholder"></div>

  <!-- Score Display -->
  <div class="score-display" id="scoreDisplay" style="display: none;">
    <span class="score-label">SKOR</span>
    <span id="scoreText">0/2</span>
  </div>

  <!-- Game Content -->
  <div class="game-container">
    <div class="game-title">Jom Pilih!</div>
    <div class="main-layout">
      <div class="left-section">
        <div class="question-label">dalam</div>
        <div class="question-box" id="questionBox">
          <div class="question-mark">?</div>
          <img src="../../../assets/images/inside.png" alt="inside" class="question-icon">
          <img class="answer-image" id="answerImage" src="" alt="Jawapan">
        </div>
      </div>

      <div class="right-section">
        <div class="question-prompt">Mana yang di dalam?</div>
        <div class="options-section">
          <div class="option-card" data-answer="correct">
            <img src="../../../assets/images/inside.png" alt="dalam" class="card-image">
          </div>
          <div class="option-card" data-answer="wrong">
            <img src="../../../assets/images/outside.png" alt="luar" class="card-image">
          </div>
        </div>
        <div class="feedback" id="feedback"></div>
      </div>
    </div>
  </div>

  <!-- Score Modal -->
  <div class="score-modal" id="scoreModal" style="display: none;">
    <div class="score-container">
      <div class="stars-container">
        <div class="star star-small"><img src="../../../assets/images/star1.png" class="star-image" alt="Star" /></div>
        <div class="star star-large"><img src="../../../assets/images/star2.png" class="star-image" alt="Star" /></div>
        <div class="star star-small"><img src="../../../assets/images/star3.png" class="star-image" alt="Star" /></div>
      </div>
      <div class="score-title">Keseluruhan Markah</div>
      <div class="score-subtitle">Spatial Concepts</div>
      <div class="games-score-list" id="gamesScoreList"></div>
      <div class="total-score-box">
        <div class="label">Peratusan Markah Keseluruhan (%)</div>
        <div class="percentage" id="totalScorePercentage">0%</div>
      </div>
      <div class="modal-buttons">
        <button class="modal-button" id="continueBtn">Teruskan</button>
        <button class="modal-button" id="finishBtn">Selesai</button>
      </div>
    </div>
  </div>

  <!-- ================= SCRIPTS ================= -->
  
  <!-- 1. FIREBASE SDK (MUST BE FIRST!) -->
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>

  <!-- 2. FIREBASE CONFIGURATION -->
  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyCpDrWgLXXHK7_9nioEQGBKJkUv4byCEd4",
      authDomain: "idzmir-kids-hub.firebaseapp.com",
      projectId: "idzmir-kids-hub",
      storageBucket: "idzmir-kids-hub.firebasestorage.app",
      messagingSenderId: "301692363279",
      appId: "1:301692363279:web:ba7c6547b36e433d6eb97a"
    };

    if (!firebase.apps.length) {
      firebase.initializeApp(firebaseConfig);
      console.log('✅ Firebase initialized successfully');
    } else {
      console.log('ℹ️ Firebase already initialized');
    }
  </script>

  <!-- 3. GAME SESSION MANAGER (CRITICAL - MUST LOAD BEFORE GAME LOGIC!) -->
  <script src="../../../js/gameSessionManager.js"></script>

  <!-- 4. GAME LOGIC -->
  <script src="../../../js/SpatialConcepts/inside-outside/game_page9.js"></script>

  <!-- 5. HEADER (LAST!) -->
  <script src="../../../js/homepage/initHeader.js"></script>
  <script>
    initializeHeader('../../homepage/header.html');
  </script>

</body>
</html>